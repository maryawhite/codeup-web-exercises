<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map ~ Filter ~ Reduce</title>
</head>
<body>

<script>

//~ * Map * ~

//TODO Together: Let's see a common approach we might have done in the past: our goal is to increase each element of an array by 1 [element + 1], then get an array back with those values

// var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
//
// var numbersAddOne = [];
//
// for (var i = 0; i < numbers.length; i += 1) {
//     numbersAddOne.push(numbers[i] + 1);
// }
// console.log(numbersAddOne); // [2, 3, 4, 5, 6, 7, 8, 9, 10, 11]

//TODO Together: Now, let's achieve the same result with the first part of our lesson: the MAP method~
// let numbersAddOneMap = numbers.map(function(number){  //we can name number whatever we want
//     return number + 1;
// });
//
// console.log(numbersAddOneMap);

//As you can see, .map() accepts a callback function - that callback function is applied to each element in the collection. What about a dive into a deeper, more complicated collection?

const favoriteRestaurants = [
    {
        name: "India Palace",
        address: "8474 Fredericksburg Rd, San Antonio, TX 78229",
        phone: "(210) 692-5262",
        restaurantFeatures: ["buffet", "party room", "to-go"]
    },
    {
        name: "Taqueria Jalisco",
        address: "7094 Bandera Rd, San Antonio, TX 78238",
        phone: "(210) 543-9400" ,
        restaurantFeatures: ["to-go", "breakfast"]
    },
    {
        name: "Sukhothai Thai Restaurant Express",
        address: "7664 Tezel Rd Suite 105, San Antonio, TX 78250",
        phone: "(210) 314-1106",
        restaurantFeatures: ["to-go", "limited seating"]
    }
]


//TODO Together: Let's get all these restaurant names out of this array of objects with .map()!
let favoriteRestaurantsMap = favoriteRestaurants.map(function(restaurant){
    return restaurant.name;
});

console.log(favoriteRestaurantsMap);


//TODO: Create your own array of (up to 3 and at least 2) restaurant objects building off of the basic list you created during the MapBox exercise (or build one anew!) ~5 mins
const MarysFavoriteRestaurants = [
    {
        name: "Bambinelli's",
        address: "3202 Northlake Pkwy NE, Atlanta, GA 30345",
        phone: "(770) 493-1311",
        restaurantFeatures: ["italian", "dining-room open", "to-go"]
    },
    {
        name: "Hunan Inn",
        address: "3662 Chamblee Tucker Rd B, Atlanta, GA 30341",
        phone: "(770) 493-8268 " ,
        restaurantFeatures: ["italian", "to-go", "dining-room open"]
    },
    {
        name: "McDonald's",
        address: "2772 Chamblee Tucker Rd, Atlanta, GA 30341",
        phone: "(555) 555-5555",
        restaurantFeatures: ["to-go", "drive-thru", "24 hours"]
    }
]

//TODO: Now, having created a personal array of restaurant objects for yourself, use .map() to get your favorite restaurant's names out of that collection, into another array, and out into the console! ~5 mins

let MarysFavoriteRestaurantsMap = MarysFavoriteRestaurants.map(function(restaurant){
    return restaurant.name;
});
console.log(MarysFavoriteRestaurantsMap);

//~ * Filter * ~

//TODO Together: Once again, let's take a look at the old way we might approach an issue: getting only one type of values out of an array (for example: even numbers only from an array of nums!)

// var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
//
// var evens = [];
//
// for (var i = 0; i < numbers.length; i += 1) {
//     if (numbers[i] % 2 === 0) {
//         evens.push(numbers[i]);
//     }
// }
// console.log(evens); // [2, 4, 6, 8, 10]


//TODO Together: Now, let's refactor the above using the ES6 .filter() method with the same goal: even numbers only!
// let evens = numbers.filter(function(n){   //you can name n whatever you want
//     return n % 2 === 0;
// });
// console.log(evens);

// let evens = numbers.filter(n => n % 2 === 0)
// console.log(evens);

//TODO Together: Using my favoriteRestaurants list, let's filter out all of the non-buffet restaurants
let hasBuffet = favoriteRestaurants.filter(function(restaurant){
        return restaurant.restaurantFeatures.includes("buffet");
});
console.log(hasBuffet);


//TODO: Each one of your restaurant arrays is unique, but, in that array, identify something to filter by - it could be as simple as "well, let me filter out all of the restaurants with names shorter than 8 characters" or get as complicated as you'd like!
// TODO: Once you've figured our what you want to filter, go ahead and write the necessary code to achieve what you wanted - remember to practice with .filter() and our ES6 verbiage!

let hasDriveThru = MarysFavoriteRestaurants.filter(function (restaurant){
    return restaurant.restaurantFeatures.includes("drive-thru");
});
console.log(hasDriveThru);

//if name.length is > 10
let nameLength = MarysFavoriteRestaurants.filter(function(restaurant){
    return restaurant.name.length > 10;
});
console.log(nameLength);


//~ * Reduce * ~

//Reduce is an interesting animal in and of itself: it's a way to reduce a collection down to, typically, a single value of some kind:

//TODO Together: Let's sum up some numbers with the .reduce() method and a number array!

let numbersReduce = [1, 2, 3, 4, 5];

// function sum (acc, numbers){
//     return acc + numbers;     //the accumulator starts at 0, similar to how we would set var sum = 0 before a for loop;
// }
// let answer = numbers.reduce(sum, 0);  //if you're starting at 0, the 0 is optional? or, the initial value is assumed to be the first value in the array?
// console.log(answer);

//reduce takes in an accumulator and a current value

// let sum = numbers.reduce((accumulator, currentValue) => { return accumulator + currentValue;},0); //0 is the initial value
let sum = numbersReduce.reduce((accumulator, currentValue) => accumulator + currentValue);
console.log(sum);

// function findMax(acc, val){
//     if(val > acc){
//         acc = val;
//     }
//     return acc
// }
// let biggest = numbers.reduce(findMax);
// console.log(biggest);
// *or*
// function findMax(acc, val){
//  if (val > acc){
//         return val
//     } else if (acc > val) {
//         return acc
//     }
// }
// let biggest = numbers.reduce(findMax)
// console.log(biggest);

let biggest = numbersReduce.reduce((acc, val) => acc > val ? acc : val);  //if the acc is greater than the number return the acc, else return the number
// console.log(biggest);

//in the past: we would have built out a loop, probably used a var of sum, and had a look inside of the loop of sum += numbers[i], spit out sum with the sum of our numbers

//In ES6 with .reduce(). .reduce() has a couple of components to it: .reduce(callbackFunction, initialValue)

//TODO Together: Let's take a step a bit deeper with .reduce() - .reduce()'s output can take many forms and shapes. For example, let's say we wanted to have a little Javascript that would count the length of the strings in an array and return that info back to us in an object. For example: ["Codeup", "San", Antonio", "Dallas", "Quasar", Cohort", "ES6"] would get us: Object { Codeup: 6, San: 3, Antonio: 7, Dallas: 6, Quasar: 6, Cohort: 6, ES6: 3 }

let stringArr = ["Codeup", "San", "Antonio", "Dallas", "Quasar", "Cohort", "ES6"];

function countWords(array){
    const wordCountObject = array.reduce((wordCounts, word) => {
            wordCounts[word] = word.length; //not sure what is happening here, word is the word in the array, and word.length is the length. wordCount at word may be like finding the index...or finding the value of a key value pair...?

        return wordCounts;
    }, {});  //starts with empty Object
    return wordCountObject;
}
console.log(countWords(stringArr));

let marysArray = ["i", "to", "cat", "four", "stale", "quasar"]
console.log(countWords((marysArray)));

//same thing without making a function
let stringLengthOb = stringArr.reduce(function(objectProp, element){
    objectProp[element] = element.length;
    return objectProp;
}, {})
console.log(stringLengthOb);

//TODO: Let's make a new array of objects to use - make an array of objects [{},{},{}] consisting of a number of family members as objects with their name and ages as properties. Use .reduce() to sum up the age of those family members and see what it is! e.g. [{name: "Thurston Howell III", age: 50}, {name: "William Dean Howells", age: 83}] would be 133 by adding those two age properties together (50 + 83).

let familyTree = [
    {name: "Homer Simpson", age: 36}, {
    name: "Marge Simpson", age: 34}, {
    name: "Bart Simpson", age: 10}, {
    name: "Lisa Simpson", age: 8}, {
    name: "Maggie Simpson", age: 1}
]

let totalAge = familyTree.reduce(function(accumulator, currentValue){
    return accumulator + currentValue.age
}, 0);     //you must include the 0 here or it will not return the correct answer
console.log(totalAge);

let totalAgeEs6 = familyTree.reduce((acc, val) => acc + val.age, 0);
console.log(totalAgeEs6);















//** from Traversy Media **
const companies= [
    {name: "Company One", category: "Finance", start: 1981, end: 2004},
    {name: "Company Two", category: "Retail", start: 1992, end: 2008},
    {name: "Company Three", category: "Auto", start: 1999, end: 2007},
    {name: "Company Four", category: "Retail", start: 1989, end: 2010},
    {name: "Company Five", category: "Technology", start: 2009, end: 2014},
    {name: "Company Six", category: "Finance", start: 1987, end: 2010},
    {name: "Company Seven", category: "Auto", start: 1986, end: 1996},
    {name: "Company Eight", category: "Technology", start: 2011, end: 2016},
    {name: "Company Nine", category: "Retail", start: 1981, end: 1989}
];

const ages = [33, 12, 20, 16, 5, 54, 21, 44, 61, 13, 15, 45, 25, 64, 32];

// for(let i = 0; i < companies.length; i++){
//     console.log(companies[i]);
// }

// companies.forEach(function(company, index, array){  //you can name company whatever you want
//     console.log(company);
//     console.log(company.name);
//     console.log(company.category);
// })

// let canDrink = [];
// for(let i = 0; i < ages.length; i++){
//     if(ages[i] >= 21){
//         canDrink.push(ages[i]);
//     }
// }
// console.log(canDrink);
//
// const canDrink2 = ages.filter(function(age){  //define the const and set it equal to the name of your array.filter(function(parameter){
//     if(age >= 21){
//         return true;
//     }
// });
// console.log(canDrink2);

const canDrinkSimplified = ages.filter(age => age >= 21);
// console.log(canDrinkSimplified);

//Filter the Retail Companies our of the given array
// const retailCompanies = companies.filter(function(company){
//     if(company.category === "Retail"){
//         return true;
//     }
// });
// console.log(retailCompanies);

const retailCompaniesEs6 = companies.filter(company => company.category === "Retail");
// console.log(retailCompaniesEs6);

//filter out all companies from the 1980s from the given array
const eightiesCompanies = companies.filter(company => (company.start >= 1980 && company.start < 1990));
// console.log(eightiesCompanies);

//all companies that last at least 10 years from the given array
const lasted10Years = companies.filter(company => (company.end - company.start >= 10));
// console.log(lasted10Years);

//map, we can create new arrays from a current array
//create a new array of company names from the given array
const companyNames = companies.map(function(company){
    return company.name;
});
// console.log(companyNames);

const companyNamesEs6 = companies.map(company => company.name);
// console.log(companyNamesEs6);

const agesSquare = ages.map(age => Math.sqrt(age));
// console.log(agesSquare);

const agesTimesTwo = ages.map(age => age * 2);
// console.log(agesTimesTwo);

//sort
//sort the companies by start date
// const sortedCompanies = companies.sort(function(c1, c2){
//     if(c1.start > c2.start){
//         return 1;
//     } else {
//         return -1;
//     }
// });
// console.log(sortedCompanies);

const sortedCompanies = companies.sort((a, b) => (a.start > b.start ? 1 : -1));
// console.log(sortedCompanies);

const sortedAges = ages.sort((a, b) => a - b); //ascending order
// console.log(sortedAges);

//reduce
let ageSum = 0
for(let i = 0; i < ages.length; i++){
    ageSum += ages[i];
}
// console.log(ageSum);

const ageSumEs6 = ages.reduce((total, age) => total + age, 0);
// console.log(ageSumEs6);

// //get total years for all companies
// const totalYears = companies.reduce(function(total, company){
//     return total + (company.end - company.start);
// }, 0);
// console.log(totalYears);

const totalYears = companies.reduce((total, company) => total + (company.end - company.start), 0);
// console.log(totalYears);

//combine methods
//you can chain the methods together like so:
const combined = ages
    .map(age => age * 2)  //this will give us an array of all ages times 2
    .filter(age => age >= 40) //this will filter out and give us the ages over 40
    .sort((a, b) => a - b)   //this will sort them lowest to highest
    .reduce((a, b) => a + b, 0); //this will add them all together
// console.log(combined);




</script>
</body>
</html>